{% extends "base/thumbnail_upload.html" %}

{% load i18n %}


{% block body_class %}
    {% if resource.resource_type == "document" %}
        documents
    {% elif resource.resource_type == "layer" %}
        layers
    {% elif resource.resource_type == "map" %}
        maps
    {% elif resource.resource_type == "geoapp" %}
        apps
    {% endif %}
{% endblock %}

{% block brand %}
    {% if resource.resource_type == "document" %}
        {% with brand_url_name="document_browse" %}
            {{ block.super }}
        {% endwith %}
    {% elif resource.resource_type == "layer" %}
        {% with brand_url_name="layer_browse" %}
            {{ block.super }}
        {% endwith %}
    {% elif resource.resource_type == "map" %}
        {% with brand_url_name="maps_browse" %}
            {{ block.super }}
        {% endwith %}
    {% elif resource.resource_type == "geoapp" %}
        {% with brand_url_name="apps_browse" %}
            {{ block.super }}
        {% endwith %}
    {% endif %}
{% endblock %}


{% block brand_details %}
    <a href="{{ resource.detail_url }}">{{ resource.title }}</a>
{% endblock %}


{% block top_middle %}{% trans "Upload a Thumbnail" %}{% endblock %}

{% block body_outer %}
{% if error %}
<div class="alert alert-error">{{ error }}</div>
{% endif %}

<div class="row">

  <div class="col-md-4">

    <!-- current uploaded thumb -->
    {% if resource.curatedthumbnail %}
      <h5>Current thumbnail</h5>
      <img src='{{ resource.curatedthumbnail.thumbnail_url }}'></img>
      <form method="POST" class="post-form">
        {% csrf_token %}
          <button type="submit" class="save btn btn-default" name="remove-thumb">
            {% trans "Remove (and use auto generated thumbnail)" %}</button>
      </form>
    {% endif %}

    <!-- upload form -->
    <form method="POST" enctype="multipart/form-data" class="post-form">
      {% csrf_token %}
        {{ form.img }}
        <button type="submit" class="save btn btn-default"  name="upload-thumb">{% trans "Upload" %}</button>
    </form>

  </div>

  <div class="col-md-4">
    <h5>{% trans "Auto generated thumbnail" %}</h5>
    <img src='{{ resource.thumbnail_url }}'></img>
  </div>

</div>

{% endblock %}